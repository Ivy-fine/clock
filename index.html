<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        div {
            color: midnightblue
        }
    </style>
</head>

<body>
    <img src="./img/timg.png" alt="" id="timg" style="display: none;">
    <canvas id="mycanvas" width="500" height="500" style="border:1px solid #ccc;"></canvas>
    <script>
        var tm = document.getElementById('timg');
        var can = document.getElementById('mycanvas');
        var cxt = can.getContext('2d');
        fn();

        function fn() {
            cxt.clearRect(0, 0, 500, 500);

            var time = new Date();
            var s = time.getSeconds();
            var m = time.getMinutes();
            var h = time.getHours();
            h = h > 12 ? h - 12 : h;
            //表框
            // cxt.save();
            // cxt.beginPath();
            // cxt.translate(250, 250);
            // cxt.lineWidth = 15;
            // cxt.strokeStyle = 'gold';
            // cxt.arc(0, 0, 150, 0, 2 * Math.PI);
            // cxt.stroke();
            // cxt.closePath();
            // cxt.restore();

            cxt.save();
            cxt.beginPath();
            cxt.drawImage(tm, 100, 100, 300, 300);
            cxt.closePath();
            cxt.restore();
            //分钟刻度
            for (var i = 0; i < 60; i++) {
                cxt.save();
                cxt.beginPath();
                cxt.translate(250, 250);
                cxt.lineWidth = 1;
                cxt.strokeStyle = '#666';
                cxt.rotate(i * 6 * Math.PI / 180);
                cxt.moveTo(0, -138);
                cxt.lineTo(0, -135);
                cxt.stroke();
                cxt.closePath();
                cxt.restore();
            }

            //小时刻度
            for (var i = 0; i < 12; i++) {
                cxt.save();
                cxt.beginPath();
                cxt.translate(250, 250);
                cxt.lineWidth = 2;
                cxt.strokeStyle = '#333';
                cxt.rotate(i * 30 * Math.PI / 180);
                cxt.moveTo(0, -138);
                cxt.lineTo(0, -130);
                cxt.stroke();
                cxt.closePath();
                cxt.restore();
            }

            //秒针
            point(2, 135, 'brown', s * 6);

            //分针
            point(4, 105, '#333', m * 6);

            //时针
            point(6, 75, '#333', h * 30 + m / 60 * 30);

            //圆心点
            cxt.save();
            cxt.beginPath();
            cxt.translate(250, 250);
            cxt.fillStyle = '#000';
            cxt.arc(0, 0, 8, 0, 2 * Math.PI);
            cxt.fill();
            cxt.closePath();
            cxt.restore();

            //指针
            function point(w, l, color = 'darkred', de = 0) {
                cxt.save();
                cxt.beginPath();
                cxt.translate(250, 250);
                cxt.lineWidth = w;
                cxt.lineCap = 'round';
                cxt.strokeStyle = color;
                cxt.rotate(de * Math.PI / 180);
                cxt.moveTo(0, 20);
                cxt.lineTo(0, -l);
                cxt.stroke();
                cxt.closePath();
                cxt.clip();
                cxt.restore();
            }
        }
        setInterval(fn, 1000);
    </script>
</body>

</html>